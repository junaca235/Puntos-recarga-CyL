"use strict";(self.webpackChunkPuntos_de_CyL=self.webpackChunkPuntos_de_CyL||[]).push([[592],{6518:(U,i,o)=>{o.d(i,{e:()=>M});var P=o(2340),v=o(7579),_=o(8505),a=o(4004),l=o(262),h=o(9646),E=o(529),c=o(1571);let M=(()=>{class s{constructor(r){this.http=r,this._baseUrl=P.N.mongoUrl,this.usuario=new v.x}login(r,n){return this.http.post(`${this._baseUrl}/auth/`,{name:r,password:n}).pipe((0,_.b)(t=>{t.ok&&(localStorage.setItem("token",t.token),this.usuario.next(t))}),(0,a.U)(t=>t.ok),(0,l.K)(t=>(0,h.of)(t.error.msg)))}registro(r,n){return this.http.post(`${this._baseUrl}/auth/new`,{name:r,password:n}).pipe((0,_.b)(({ok:t,token:D})=>{t&&localStorage.setItem("token",D)}),(0,a.U)(t=>t.ok),(0,l.K)(t=>(0,h.of)(t.error.msg)))}logOut(){localStorage.removeItem("token")}validarToken(){const r=`${this._baseUrl}/auth/renew`,n=(new E.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(r,{headers:n}).pipe((0,_.b)(e=>e),(0,a.U)(e=>e.ok),(0,l.K)(e=>(0,h.of)(!1)))}}return s.\u0275fac=function(r){return new(r||s)(c.LFG(E.eN))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);